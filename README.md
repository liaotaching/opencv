# Haar Training Project 3 - è·¯ç‡ˆåµæ¸¬å™¨

æœ¬å°ˆæ¡ˆä½¿ç”¨ OpenCV çš„ Haar ç´šè¯åˆ†é¡å™¨ (Cascade Classifier) æŠ€è¡“ï¼Œè¨“ç·´ä¸€å€‹å¯è¾¨è­˜è·¯ç‡ˆçš„åˆ†é¡å™¨ã€‚æ•´å€‹æµç¨‹æ¶µè“‹è³‡æ–™æ¨™è¨»ã€æ¨£æœ¬ç”Ÿæˆã€æ¨¡å‹è¨“ç·´èˆ‡æ¸¬è©¦å±•ç¤ºã€‚

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹èªªæ˜

| è³‡æ–™å¤¾ / æª”æ¡ˆåç¨±         | èªªæ˜ |
|--------------------------|------|
| `annotations/`           | ä½¿ç”¨ LabelImg æ¨™è¨»å¾Œç”¢å‡ºçš„ XML æ¨™è¨»æª” |
| `pos/`                   | æ­£æ¨£æœ¬å½±åƒï¼ˆå«è·¯ç‡ˆï¼‰ |
| `neg/`                   | è² æ¨£æœ¬å½±åƒï¼ˆä¸å«è·¯ç‡ˆï¼‰ |
| `test_data/`             | æ¸¬è©¦ç”¨å½±åƒè³‡æ–™å¤¾ |
| `model/`                 | è¨“ç·´å®Œæˆçš„ Haar ç´šè¯æ¨¡å‹ï¼ˆ`cascade.xml` ç­‰ï¼‰ |
| `generate_pos_txt.py`    | ç”¢ç”Ÿ `pos.txt`ï¼ˆè¨“ç·´æ­£æ¨£æœ¬æ¨™è¨»è³‡æ–™ï¼‰ |
| `generate_neg_txt.py`    | ç”¢ç”Ÿ `neg.txt`ï¼ˆåˆ—å‡ºæ‰€æœ‰è² æ¨£æœ¬åœ–ç‰‡ï¼‰ |
| `pos.txt`                | å„²å­˜æ­£æ¨£æœ¬ä½ç½®èˆ‡æ¨™è¨»æ¡†è³‡è¨Šçš„æª”æ¡ˆ |
| `neg.txt`                | å„²å­˜è² æ¨£æœ¬åœ–ç‰‡è·¯å¾‘çš„æª”æ¡ˆ |
| `pos.vec`                | ä½¿ç”¨ `opencv_createsamples` å·¥å…·è½‰æ›å‡ºçš„å‘é‡æ ¼å¼æ­£æ¨£æœ¬ |
| `train_command.txt`      | è¨“ç·´æ¨¡å‹æ™‚åœ¨command line è¦è¼¸å…¥çš„æŒ‡ä»¤ |
| `haar_lamp_detector.py`  | æ¸¬è©¦ç”¨çš„åµæ¸¬è…³æœ¬ï¼Œè®€å– `cascade.xml` ä¸¦åœ¨åœ–ç‰‡ä¸­ç•«å‡ºè¾¨è­˜çµæœ |
| `æˆæœå±•ç¤ºå½±ç‰‡.mp4`        | æ¨¡å‹æ‡‰ç”¨å±•ç¤ºå½±ç‰‡ |

---

## ğŸ› ï¸ ä½¿ç”¨æ–¹å¼

### 1. ç”¢ç”Ÿè¨“ç·´è³‡æ–™æª”
```
python generate_pos_txt.py
python generate_neg_txt.py
```
### 2. ç”¢ç”Ÿ .vec æª”ï¼ˆOpenCV è¨“ç·´æ ¼å¼ï¼‰
```
opencv_createsamples -info pos.txt -num 218 -w 11 -h 55 -vec pos.vec
```
### 3. é–‹å§‹è¨“ç·´ Haar ç´šè¯åˆ†é¡å™¨
```
opencv_traincascade -data model -vec pos.vec -bg neg.txt -numPos 210 -numNeg 375 -numStages 30 -w 11 -h 55 -featureType HAAR
```
### 4. åŸ·è¡Œæ¸¬è©¦ç¨‹å¼
```
python haar_lamp_detector.py
æŒ‰ç©ºç™½éµåˆ‡æ›ä¸‹ä¸€å¼µæ¸¬è©¦å½±åƒã€‚
```
## æˆæœå±•ç¤º
è«‹åƒè¦‹ æˆæœå±•ç¤ºå½±ç‰‡.mp4ï¼Œç¤ºç¯„æ¨¡å‹æˆåŠŸåµæ¸¬è·¯ç‡ˆçš„è¡¨ç¾ã€‚
